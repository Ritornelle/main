<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aggregate Album Ratings</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .album-list {
            list-style: none;
            padding: 0;
        }
        .album-item {
            margin-bottom: 10px;
        }
        .album-item span {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Album Ratings</h1>
    <ul id="albumList" class="album-list"></ul>

    <script>
        // Array of paths to your HTML pages
        const pages = ['https://ritornelle.github.io/main/albums/albums-of-2025.html', 'albums-of-2024.html']; // Replace with actual paths to your pages

        async function fetchAlbumData() {
            const albumList = document.getElementById('albumList');

            for (const page of pages) {
                try {
                    const response = await fetch(page);
                    if (!response.ok) throw new Error(`Failed to fetch ${page}`);
                    const text = await response.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(text, 'text/html');

                    // Select all album elements
                    const albums = doc.querySelectorAll('.album');

                    albums.forEach(album => {
                        const rating = album.querySelector('.album-rating').textContent.trim();
                        if (rating !== '7¼') {
                        return;  // Skip this album if rating is not 7¼
                        const ratingNum = parseInt(rating, 10);
                        const artist = album.querySelector('.album-text h3:nth-child(1)').textContent;
                        const albumName = album.querySelector('.album-text h3:nth-child(2)').textContent;

                        // Create list item for each album
                        const li = document.createElement('li');
                        li.className = 'album-item';
                        li.innerHTML = `<span>${artist}</span> - ${albumName} (Rating: ${rating})`;
                        albumList.appendChild(li);
                    });
                } catch (error) {
                    console.error(`Error processing ${page}:`, error);
                }
            }
        }

        // Run the function when the page loads
        window.onload = fetchAlbumData;
    </script>
</body>
</html>